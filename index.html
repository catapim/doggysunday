<html>
<script src="./js/planck.min.js"></script>

<body>
    <canvas width="640" height="480" id="canvas">

    </canvas>
</body>
<script src="./js/world.js"></script>
<script src="./js/controls.js"></script>

<script>


    // rendering loop

    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");


    (function loop() {
        // in each frame call world.step(timeStep) with fixed timeStep
        world.step(1 / 60);
        // iterate over bodies and fixtures
        ctx.clearRect(0, 0, WIDTH, HEIGHT);

        for (var body = world.getBodyList(); body; body = body.getNext()) {
            for (var fixture = body.getFixtureList(); fixture; fixture = fixture.getNext()) {
                // draw or update fixture
            }
            let shape=body.getFixtureList().getShape();
            console.log(shape.getVertex(0).x,shape.getVertex(0).y);
            console.log(shape.getVertex(1).x,shape.getVertex(1).y);
            console.log(shape.getVertex(2).x,shape.getVertex(2).y);
            console.log(shape.getVertex(3).x,shape.getVertex(3).y);
            console.log("a");
            let p = body.getPosition();
            if (body.getUserData() && body.getUserData().name == "fence") {
                ctx.fillStyle = "#000000";

            } else {
                ctx.fillStyle = "#FF0000";

            }
            
            ctx.fillRect(p.x+shape.getVertex(0).x, p.y+shape.getVertex(0).y, 10, 10);

        }
        // request a new frame
        window.requestAnimationFrame(loop);
        getKey();
    })();



</script>

</html>